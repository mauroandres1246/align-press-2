{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://align-press.com/schemas/platen.schema.json",
  "title": "Platen Profile Schema",
  "description": "Schema for platen (plancha) profile configuration",
  "type": "object",
  "required": ["version", "name", "type", "dimensions_mm"],
  "properties": {
    "version": {
      "type": "integer",
      "minimum": 1,
      "description": "Profile version number"
    },
    "name": {
      "type": "string",
      "minLength": 1,
      "description": "Human-readable platen name"
    },
    "type": {
      "type": "string",
      "enum": ["platen"],
      "description": "Profile type identifier"
    },
    "dimensions_mm": {
      "type": "object",
      "required": ["width", "height"],
      "properties": {
        "width": {
          "type": "number",
          "minimum": 0,
          "description": "Platen width in millimeters"
        },
        "height": {
          "type": "number",
          "minimum": 0,
          "description": "Platen height in millimeters"
        }
      },
      "additionalProperties": false
    },
    "calibration": {
      "type": "object",
      "properties": {
        "camera_id": {
          "oneOf": [
            {"type": "integer", "minimum": 0},
            {"type": "string", "minLength": 1}
          ],
          "description": "Camera identifier"
        },
        "last_calibrated": {
          "type": "string",
          "format": "date-time",
          "description": "Last calibration timestamp"
        },
        "homography_path": {
          "type": "string",
          "minLength": 1,
          "description": "Path to homography calibration file"
        },
        "mm_per_px": {
          "type": "number",
          "minimum": 0,
          "description": "Scale factor: millimeters per pixel"
        }
      },
      "additionalProperties": false
    },
    "metadata": {
      "type": "object",
      "properties": {
        "description": {
          "type": "string",
          "description": "Platen description"
        },
        "max_temperature_c": {
          "type": "number",
          "minimum": 0,
          "description": "Maximum operating temperature in Celsius"
        },
        "pressure_bar": {
          "type": "number",
          "minimum": 0,
          "description": "Operating pressure in bar"
        },
        "created_date": {
          "type": "string",
          "pattern": "^\\d{4}-\\d{2}-\\d{2}$",
          "description": "Creation date (YYYY-MM-DD)"
        },
        "created_by": {
          "type": "string",
          "description": "Creator identifier"
        }
      },
      "additionalProperties": true
    }
  },
  "additionalProperties": false
}